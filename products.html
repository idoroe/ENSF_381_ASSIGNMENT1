<!--
=========================================================
Name        : products.html
Assignment  : Assignment 3
Author(s)   : Elias Poitras-Whitecalf (30193066), Emmanuel Idoro(30134292)
Submission  : March 11th, 2024
Description : assignment 3
========
-->
<!DOCTYPE html>
<html lang = "en">
<head>
    <link rel="stylesheet" href="styles.css">
    <meta name="E-commerce website" content="E-commerce">
    <title>Products</title>
    
</head>
<script>
    var cartItems = [];

    function addToCart(button) {    
        var parentDiv = button.parentNode; // Get the parent div of the clicked button
        var priceElement = parentDiv.querySelector("#price"); // Find the price element within the parent div
        var productNameElement = parentDiv.querySelector("#product-name");
        var price = parseFloat(priceElement.textContent); // Gets the text content of the price element and turns to float
        var productName = productNameElement.textContent;

        var existingProduct = cartItems.find(item => item.productName === productName);

        if (existingProduct) {
            existingProduct.quantity++; //increases quantity if its in cartItems
        } else {
            var newProduct = {
                productName: productName,
                price: price,
                quantity: 1
            };
            cartItems.push(newProduct);
        }

        updateCartDisplay(); 
        alert(productName + " has been added to cart");
    }


    function removeFromCart(productName) {
        var existingProductIndex = cartItems.findIndex(item => item.productName === productName);

        if (existingProductIndex !== -1) {
            cartItems[existingProductIndex].quantity--;

            if (cartItems[existingProductIndex].quantity === 0) {
                cartItems.splice(existingProductIndex, 1);
            }   //removes 1 from quantity, and if quanitity =0 removes from cart

            updateCartDisplay();
        }
    }

    function updateCartDisplay() {
    var cartContents = document.getElementById('cart-contents'); //cartContents = the element with id cart-content which is div on line 178
    cartContents.innerHTML = '';

    cartItems.forEach(function(item) { 
        var container = document.createElement("div");
        container.className = "cart-item";  //creates div element with class cart-item

        var detailsContainer = document.createElement("div");
        detailsContainer.className = "product-details"; //creates div element with class product details

        var productNameP = document.createElement("p");
        productNameP.textContent = item.productName + ' - ' + item.price.toFixed(2) +  ' - ' + item.quantity; //text content of <p> = name, price, and quanity

        detailsContainer.appendChild(productNameP); //adds to the div with class product-details

        var addButton = document.createElement("button"); //creating button
        addButton.type = "button";
        addButton.className = "button";
        addButton.id = "remove-button"; //remove-button id so it will turn red on hover
        addButton.textContent = "Remove";
        addButton.onclick = function() {
            removeFromCart(item.productName);
        };
        detailsContainer.appendChild(addButton);//adds button to same div that <p> is in 
        container.appendChild(detailsContainer); //adds the container with div and <p> into the cart-item

        cartContents.appendChild(container); // adds the cart-item into the cart-contents div on line 178
    });
}

</script>


<body>
    <div class="wrapper">
        <header class="header">
            <div id="logo">
                <img width="12%"  src="images/Logo.png" alt="logo"class="logo" >
                <h2 class="brand-name">Re:Thread</h2>
            </div>
        </header> 
        <nav class="nav">
            <a href="index.html">Home</a> 
            <a href="products.html">Products</a>
            <a href="contact.html">Contact Us</a>
            <a href="login.html">Login</a>
        </nav>
        <main class="main">
            <div class="main" id="product">
                <img src="images/TW6_1065-2.jpg" alt="" width="100%"id="imgid">
                <article>
                    <h2 id="product-name">Black Cargos</h2>
                    <p id="price">27.99$</p>                   
                    <button type="button" id="button" name="add to cart" value="add one to cart" onclick="addToCart(this)">Add to Cart</button>    
                </article>
            </div>
            <div class="main" id="product">
                <img src="images/TW6_1074-2.jpg" alt="" width="100%"id="imgid">
                <article>
                    <h2 id="product-name">Long Sleeve Tee</h2>
                    <p id="price">15.75$</p>  
                    <button type="button" id="button" name="add to cart" value="add one to cart" onclick="addToCart(this)">Add to Cart</button>
                </article>
            </div>
            <div class="main" id="product">        
                <img src="images/TW6_1069-2.jpg" alt="" width="100%"id="imgid">
                <article>
                    <h2 id="product-name">Brown Cargo Pants</h2>
                    <p id="price">27.99$</p>                   
                    <button type="button" id="button" name="add to cart" value="add one to cart" onclick="addToCart(this)">Add to Cart</button>
                </article>
            </div>
            <div class="main" id="product">
                <img src="images/TW6_1080-2.jpg" alt="" width="100%" id="imgid">
                <article>
                    <h2 id="product-name">Brown Jacket</h2>
                    <p id="price">27.99$</p>                   
                    <button type="button" id="button" name="add to cart" value="add one to cart" onclick="addToCart(this)" onclick="addToCart(this)">Add to Cart</button>
                </article>
            </div>
            <div class="main" id="product">
                <img src="images/TW6_1065-2.jpg" alt="" width="100%"id="imgid">
                    <article>
                        <h2 id="product-name">Black Cargos</h2>
                        <p id="price">27.99$</p>                   
                        <button type="button" id="button" name="add to cart" value="add one to cart" onclick="addToCart(this)">Add to Cart</button>
                    </article>
            </div>
            <div class="main" id="product">
                <img src="images/TW6_1074-2.jpg" alt="" width="100%"id="imgid">
                <article>
                    <h2 id="product-name">Long Sleeve Tee</h2>
                    <p id="price">15.75$</p>  
                    <button type="button" id="button" name="add to cart" value="add one to cart" onclick="addToCart(this)">Add to Cart</button>
                </article>
            </div>
        
            <div class="main" id="product">
                <img src="images/TW6_1074-2.jpg" alt="" width="100%"id="imgid">
                <article>
                    <h2 id="product-name">Long Sleeve Tee</h2>
                    <p id="price">15.75$</p>  
                    <button type="button" id="button" name="add to cart" value="add one to cart" onclick="addToCart(this)">Add to Cart</button>
                </article>
            </div>
            <div class="main" id="product">
                <img src="images/TW6_1074-2.jpg" alt="" width="100%"id="imgid">
                <article>
                    <h2 id="product-name">Long Sleeve Tee</h2>
                    <p id="price">15.75$</p>  
                    <button type="button" id="button" name="add to cart" value="add one to cart" onclick="addToCart(this)">Add to Cart</button>
                </article>
            </div>
        
                        
        </main>
        <div class="main" id="cart">
            <h2 width ='100%'>Shopping Cart</h2>
            <div class = "cart-contents" id="cart-contents"> 
            </div>
        </div>
        <footer class="footer">
            <p>&copy; 2024 All rights reserved.-Elias, Emmanuel 2024</p>
        </footer>
    </div>
</body> 
</html>
